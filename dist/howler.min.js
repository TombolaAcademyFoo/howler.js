/*! howler.js v2.0.5 | (c) 2013-2017, James Simpson of GoldFire Studios | MIT License | howlerjs.com */
!function(){"use strict";var e=function(e){return/iP(hone|od|ad)/.test(e&&e.platform)},o=function(e){var o=e&&e.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return o?parseInt(o[1],10):null},n=function(e){return/safari/.test(e&&e.userAgent.toLowerCase())},t=function(e,o,n){console.log("**** unlock generic");var t=e.createOscillator();t.frequency.value=440,t.connect(e.destination),t.onended=function(){t.disconnect(0),console.log("Oscillator - Done"),n()},console.log("Oscillator - Start"),t.start(0),t.stop(.1),"function"==typeof e.resume&&e.resume()},r=function(){this.init()};r.prototype={init:function(){var o=this||a;return console.log("**** HOWLER INIT"),o._counter=1e3,o._codecs={},o._howls=[],o._muted=!1,o._volume=1,o._canPlayEvent="canplaythrough",o._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,o.masterGain=null,o.noAudio=!1,o.usingWebAudio=!0,o.autoSuspend=!0,o.ctx=null,o.mobileAutoEnable=!0,o._isIosSafari=n(o._navigator)&&e(o._navigator),o.needsIosContextUnlock=o._isIosSafari,console.log("************** Init ************** "),console.log(o),console.log("********************************** "),o._setup(),console.log("**** HOWLER INIT - DONE"),o},volume:function(e){var o=this||a;if(console.log("**** HOWLER VOLUME"),e=parseFloat(e),o.ctx||p(),void 0!==e&&e>=0&&e<=1){if(o._volume=e,o._muted)return console.log("**** HOWLER VOLUME - DONE (muted)"),o;o.usingWebAudio&&(o.masterGain.gain.value=e);for(var n=0;n<o._howls.length;n++)if(!o._howls[n]._webAudio)for(var t=o._howls[n]._getSoundIds(),r=0;r<t.length;r++){var u=o._howls[n]._soundById(t[r]);u&&u._node&&(u._node.volume=u._volume*e)}return console.log("**** HOWLER VOLUME - DONE"),o}return o._volume},mute:function(e){var o=this||a;console.log("**** HOWLER MUTE"),o.ctx||p(),o._muted=e,o.usingWebAudio&&(o.masterGain.gain.value=e?0:o._volume);for(var n=0;n<o._howls.length;n++)if(!o._howls[n]._webAudio)for(var t=o._howls[n]._getSoundIds(),r=0;r<t.length;r++){var u=o._howls[n]._soundById(t[r]);u&&u._node&&(u._node.muted=!!e||u._muted)}return console.log("**** HOWLER MUTE - DONE"),o},unload:function(){var e=this||a;console.log("**** HOWLER UNLOAD");for(var o=e._howls.length-1;o>=0;o--)e._howls[o].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,p()),console.log("**** HOWLER UNLOAD - DONE"),e},codecs:function(e){return(this||a)._codecs[e.replace(/^x-/,"")]},get needsIosContextUnlock(){var e=(this||a)._needsIosContextUnlock;return console.log("**** Unlock needed= "+e),e},set needsIosContextUnlock(e){var o=this||a;o._isIosSafari||(e=!1),o._needsIosContextUnlock=e,console.log("**** Setting unlock needed status="+o._needsIosContextUnlock)},_setup:function(){var e=this||a;if(console.log("**** HOWLER _SETUP"),e.state=e.ctx?e.ctx.state||"running":"running",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{var o=new Audio;void 0===o.oncanplaythrough&&(e._canPlayEvent="canplay")}catch(o){e.noAudio=!0}else e.noAudio=!0;try{var o=new Audio;o.muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),console.log("**** HOWLER _SETUP - DONE"),e},_setupCodecs:function(){var e=this||a,o=null;console.log("**** HOWLER _SETUPCODECS");try{o="undefined"!=typeof Audio?new Audio:null}catch(o){return console.log("**** HOWLER _SETUPCODECS - ERROR"),e}if(!o||"function"!=typeof o.canPlayType)return console.log("**** HOWLER _SETUPCODECS - DONE (No support)"),e;var n=o.canPlayType("audio/mpeg;").replace(/^no$/,""),t=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),r=t&&parseInt(t[0].split("/")[1],10)<33;return e._codecs={mp3:!(r||!n&&!o.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!o.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!o.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!o.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/m4a;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(o.canPlayType("audio/x-mp4;")||o.canPlayType("audio/mp4;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!o.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(o.canPlayType("audio/x-flac;")||o.canPlayType("audio/flac;")).replace(/^no$/,"")},console.log("**** HOWLER _SETUPCODECS - DONE"),e},_enableMobileAudio:function(){var e=this||a;console.log("**** HOWLER _ENABLEMOBILEAUDIO");var o=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(e._navigator&&e._navigator.userAgent),n=!!("ontouchend"in window||e._navigator&&e._navigator.maxTouchPoints>0||e._navigator&&e._navigator.msMaxTouchPoints>0);if(e._mobileEnabled||!e.ctx||!o&&!n)return void console.log("**** HOWLER _ENABLEMOBILEAUDIO - DONE (not touch device)");e._mobileEnabled=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,console.log("**** Unloading"),e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var r=function(){console.log("**** HOWLER UNLOCK"),a._autoResume(),t(e.ctx,e._scratchBuffer,function(){e._mobileEnabled=!0,e.mobileAutoEnable=!1,a.needsIosContextUnlock=!1,document.removeEventListener("touchend",r,!0)})};return document.addEventListener("touchend",r,!0),console.log("**** HOWLER _ENABLEMOBILEAUDIO - DONE"),e},_autoSuspend:function(){var e=this;if(console.log("**** HOWLER _AUTOSUSPEND"),!e.autoSuspend)return void console.log("**** HOWLER _AUTOSUSPEND - DONE (Not suspeneded) ");if(!a.usingWebAudio)return void console.log("**** HOWLER _AUTOSUSPEND - DONE (Not using web audio) ");if(!e.ctx)return void console.log("**** HOWLER _AUTOSUSPEND - DONE (no context) ");if(void 0===e.ctx.suspend)return void console.log("**** HOWLER _AUTOSUSPEND - DONE (context unsuspendable) ");for(var o=0;o<e._howls.length;o++)if(e._howls[o]._webAudio)for(var n=0;n<e._howls[o]._sounds.length;n++)if(!e._howls[o]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),console.log("**** HOWLER _AUTOSUSPEND - DONE"),e},_autoResume:function(){var e=this;return console.log("**** HOWLER _AUTORESUME"),e.ctx&&void 0!==e.ctx.resume&&a.usingWebAudio?("running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then(function(){e.state="running";for(var o=0;o<e._howls.length;o++)e._howls[o]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),console.log("**** HOWLER _AUTORESUME - DONE"),e):void console.log("**** HOWLER _AUTORESUME - DONE (non-resumable)")}};var a=new r,u=function(e){var o=this;if(!e.src||0===e.src.length)return void console.error("An array of source files must be passed with any new Howl.");o.init(e)};u.prototype={init:function(e){var o=this;return console.log("**** HOWL INIT"),a.ctx||p(),o._autoplay=e.autoplay||!1,o._format="string"!=typeof e.format?e.format:[e.format],o._html5=e.html5||!1,o._muted=e.mute||!1,o._loop=e.loop||!1,o._pool=e.pool||5,o._preload="boolean"!=typeof e.preload||e.preload,o._rate=e.rate||1,o._sprite=e.sprite||{},o._src="string"!=typeof e.src?e.src:[e.src],o._volume=void 0!==e.volume?e.volume:1,o._duration=0,o._state="unloaded",o._sounds=[],o._endTimers={},o._queue=[],o._onend=e.onend?[{fn:e.onend}]:[],o._onfade=e.onfade?[{fn:e.onfade}]:[],o._onload=e.onload?[{fn:e.onload}]:[],o._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],o._onpause=e.onpause?[{fn:e.onpause}]:[],o._onplay=e.onplay?[{fn:e.onplay}]:[],o._onstop=e.onstop?[{fn:e.onstop}]:[],o._onmute=e.onmute?[{fn:e.onmute}]:[],o._onvolume=e.onvolume?[{fn:e.onvolume}]:[],o._onrate=e.onrate?[{fn:e.onrate}]:[],o._onseek=e.onseek?[{fn:e.onseek}]:[],o._onresume=[],o._webAudio=a.usingWebAudio&&!o._html5,void 0!==a.ctx&&a.ctx&&a.mobileAutoEnable&&a._enableMobileAudio(),a._howls.push(o),o._autoplay&&!a.needsIosContextUnlock&&o._queue.push({event:"play",action:function(){o.play()}}),o._preload&&o.load(),o},load:function(){var e=this,o=null;if(console.log("**** HOWL LOAD"),a.noAudio)return void e._emit("loaderror",null,"No audio support.");"string"==typeof e._src&&(e._src=[e._src]);for(var n=0;n<e._src.length;n++){var t,r;if(e._format&&e._format[n])t=e._format[n];else{if("string"!=typeof(r=e._src[n])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}t=/^data:audio\/([^;,]+);/i.exec(r),t||(t=/\.([^.]+)$/.exec(r.split("?",1)[0])),t&&(t=t[1].toLowerCase())}if(t||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),t&&a.codecs(t)){o=e._src[n];break}}return o?(e._src=o,e._state="loading","https:"===window.location.protocol&&"http:"===o.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new i(e),e._webAudio&&d(e),e):void e._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(e,o){var n=this,t=null;if(console.log("**** HOWL PLAY"),console.log("**** Needs unlock status= "+a.needsIosContextUnlock),"number"==typeof e)t=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return console.log("**** passed sprite does not exist"),null;if(void 0===e){e="__default";for(var r=0,u=0;u<n._sounds.length;u++)n._sounds[u]._paused&&!n._sounds[u]._ended&&(r++,t=n._sounds[u]._id);1===r?e=null:t=null}}var i=t?n._soundById(t):n._inactiveSound();if(!i)return console.log("**** No sound"),null;if(t&&!e&&(e=i._sprite||"__default"),"loaded"!==n._state){console.log("**** Not loaded, waiting"),i._sprite=e,i._ended=!1;var s=i._id;return n._queue.push({event:"play",action:function(){n.play(s)}}),s}if(t&&!i._paused)return o||(console.log("**** triggering internal event to process queue"),setTimeout(function(){n._emit("play",i._id)},0)),i._id;if(a.needsIosContextUnlock)return console.log("**** Needs context unlocking - TODO"),i._id;n._webAudio&&a._autoResume();var d=Math.max(0,i._seek>0?i._seek:n._sprite[e][0]/1e3),l=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-d),_=1e3*l/Math.abs(i._rate);i._paused=!1,i._ended=!1,i._sprite=e,i._seek=d,i._start=n._sprite[e][0]/1e3,i._stop=(n._sprite[e][0]+n._sprite[e][1])/1e3,i._loop=!(!i._loop&&!n._sprite[e][2]);var c=i._node;if(n._webAudio){var f=function(){console.log("**** Play WebAudio"),n._refreshBuffer(i);var e=i._muted||n._muted?0:i._volume;c.gain.setValueAtTime(e,a.ctx.currentTime),i._playStart=a.ctx.currentTime,void 0===c.bufferSource.start?i._loop?c.bufferSource.noteGrainOn(0,d,86400):c.bufferSource.noteGrainOn(0,d,l):i._loop?c.bufferSource.start(0,d,86400):c.bufferSource.start(0,d,l),_!==1/0&&(n._endTimers[i._id]=setTimeout(n._ended.bind(n,i),_)),o||setTimeout(function(){n._emit("play",i._id)},0)},p="running"===a.state;if("loaded"===n._state&&p)f();else{var v=p||"loaded"!==n._state?"load":"resume";n.once(v,f,p?i._id:null),n._clearTimer(i._id)}}else{var g=function(){console.log("**** Play HTML 5"),c.currentTime=d,c.muted=i._muted||n._muted||a._muted||c.muted,c.volume=i._volume*a.volume(),c.playbackRate=i._rate,c.play(),_!==1/0&&(n._endTimers[i._id]=setTimeout(n._ended.bind(n,i),_)),o||n._emit("play",i._id)},m="loaded"===n._state&&(window&&window.ejecta||!c.readyState&&a._navigator.isCocoonJS);if(4===c.readyState||m)g();else{var h=function(){g(),c.removeEventListener(a._canPlayEvent,h,!1)};c.addEventListener(a._canPlayEvent,h,!1),n._clearTimer(i._id)}}return i._id},pause:function(e){var o=this;if(console.log("**** HOWL PAUSE"),"loaded"!==o._state)return o._queue.push({event:"pause",action:function(){o.pause(e)}}),o;for(var n=o._getSoundIds(e),t=0;t<n.length;t++){o._clearTimer(n[t]);var r=o._soundById(n[t]);if(r&&!r._paused&&(r._seek=o.seek(n[t]),r._rateSeek=0,r._paused=!0,o._stopFade(n[t]),r._node))if(o._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),o._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||o._emit("pause",r?r._id:null)}return o},stop:function(e,o){var n=this;if(console.log("**** HOWL STOP"),"loaded"!==n._state)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var t=n._getSoundIds(e),r=0;r<t.length;r++){n._clearTimer(t[r]);var a=n._soundById(t[r]);a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,n._stopFade(t[r]),a._node&&(n._webAudio?a._node.bufferSource&&(void 0===a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),n._cleanBuffer(a._node)):isNaN(a._node.duration)&&a._node.duration!==1/0||(a._node.currentTime=a._start||0,a._node.pause())),o||n._emit("stop",a._id))}return n},mute:function(e,o){var n=this;if(console.log("**** HOWL MUTE"),"loaded"!==n._state)return n._queue.push({event:"mute",action:function(){n.mute(e,o)}}),n;if(void 0===o){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var t=n._getSoundIds(o),r=0;r<t.length;r++){var u=n._soundById(t[r]);u&&(u._muted=e,n._webAudio&&u._node?u._node.gain.setValueAtTime(e?0:u._volume,a.ctx.currentTime):u._node&&(u._node.muted=!!a._muted||e),n._emit("mute",u._id))}return n},volume:function(){var e,o,n=this,t=arguments;if(console.log("**** HOWL VOLUME"),0===t.length)return n._volume;if(1===t.length||2===t.length&&void 0===t[1]){n._getSoundIds().indexOf(t[0])>=0?o=parseInt(t[0],10):e=parseFloat(t[0])}else t.length>=2&&(e=parseFloat(t[0]),o=parseInt(t[1],10));var r;if(!(void 0!==e&&e>=0&&e<=1))return r=o?n._soundById(o):n._sounds[0],r?r._volume:0;if("loaded"!==n._state)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,t)}}),n;void 0===o&&(n._volume=e),o=n._getSoundIds(o);for(var u=0;u<o.length;u++)(r=n._soundById(o[u]))&&(r._volume=e,t[2]||n._stopFade(o[u]),n._webAudio&&r._node&&!r._muted?r._node.gain.setValueAtTime(e,a.ctx.currentTime):r._node&&!r._muted&&(r._node.volume=e*a.volume()),n._emit("volume",r._id));return n},fade:function(e,o,n,t){var r=this,u=Math.abs(e-o),i=e>o?"out":"in",s=u/.01,d=s>0?n/s:n;if(console.log("**** HOWL FADE"),d<4&&(s=Math.ceil(s/(4/d)),d=4),"loaded"!==r._state)return r._queue.push({event:"fade",action:function(){r.fade(e,o,n,t)}}),r;r.volume(e,t);for(var l=r._getSoundIds(t),_=0;_<l.length;_++){var c=r._soundById(l[_]);if(c){if(t||r._stopFade(l[_]),r._webAudio&&!c._muted){var f=a.ctx.currentTime,p=f+n/1e3;c._volume=e,c._node.gain.setValueAtTime(e,f),c._node.gain.linearRampToValueAtTime(o,p)}var v=e;c._interval=setInterval(function(n,a){s>0&&(v+="in"===i?.01:-.01),v=Math.max(0,v),v=Math.min(1,v),v=Math.round(100*v)/100,r._webAudio?(void 0===t&&(r._volume=v),a._volume=v):r.volume(v,n,!0),(o<e&&v<=o||o>e&&v>=o)&&(clearInterval(a._interval),a._interval=null,r.volume(o,n),r._emit("fade",n))}.bind(r,l[_],c),d)}}return r},_stopFade:function(e){var o=this,n=o._soundById(e);return console.log("**** HOWL _STOPFADE"),n&&n._interval&&(o._webAudio&&n._node.gain.cancelScheduledValues(a.ctx.currentTime),clearInterval(n._interval),n._interval=null,o._emit("fade",e)),o},loop:function(){var e,o,n,t=this,r=arguments;if(console.log("**** HOWL LOOP"),0===r.length)return t._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(n=t._soundById(parseInt(r[0],10)))&&n._loop;e=r[0],t._loop=e}else 2===r.length&&(e=r[0],o=parseInt(r[1],10));for(var a=t._getSoundIds(o),u=0;u<a.length;u++)(n=t._soundById(a[u]))&&(n._loop=e,t._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return t},rate:function(){var e,o,n=this,t=arguments;if(console.log("**** HOWL RATE"),0===t.length)o=n._sounds[0]._id;else if(1===t.length){var r=n._getSoundIds(),u=r.indexOf(t[0]);u>=0?o=parseInt(t[0],10):e=parseFloat(t[0])}else 2===t.length&&(e=parseFloat(t[0]),o=parseInt(t[1],10));var i;if("number"!=typeof e)return i=n._soundById(o),i?i._rate:n._rate;if("loaded"!==n._state)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,t)}}),n;void 0===o&&(n._rate=e),o=n._getSoundIds(o);for(var s=0;s<o.length;s++)if(i=n._soundById(o[s])){i._rateSeek=n.seek(o[s]),i._playStart=n._webAudio?a.ctx.currentTime:i._playStart,i._rate=e,n._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.value=e:i._node&&(i._node.playbackRate=e);var d=n.seek(o[s]),l=(n._sprite[i._sprite][0]+n._sprite[i._sprite][1])/1e3-d,_=1e3*l/Math.abs(i._rate);!n._endTimers[o[s]]&&i._paused||(n._clearTimer(o[s]),n._endTimers[o[s]]=setTimeout(n._ended.bind(n,i),_)),n._emit("rate",i._id)}return n},seek:function(){var e,o,n=this,t=arguments;if(console.log("**** HOWL SEEK"),0===t.length)o=n._sounds[0]._id;else if(1===t.length){var r=n._getSoundIds(),u=r.indexOf(t[0]);u>=0?o=parseInt(t[0],10):(o=n._sounds[0]._id,e=parseFloat(t[0]))}else 2===t.length&&(e=parseFloat(t[0]),o=parseInt(t[1],10));if(void 0===o)return n;if("loaded"!==n._state)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,t)}}),n;var i=n._soundById(o);if(i){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var s=n.playing(o)?a.ctx.currentTime-i._playStart:0,d=i._rateSeek?i._rateSeek-i._seek:0;return i._seek+(d+s*Math.abs(i._rate))}return i._node.currentTime}var l=n.playing(o);l&&n.pause(o,!0),i._seek=e,i._ended=!1,n._clearTimer(o),l&&n.play(o,!0),!n._webAudio&&i._node&&(i._node.currentTime=e),n._emit("seek",o)}return n},playing:function(e){var o=this;if(console.log("**** HOWL PLAYING"),"number"==typeof e){var n=o._soundById(e);return!!n&&!n._paused}for(var t=0;t<o._sounds.length;t++)if(!o._sounds[t]._paused)return!0;return!1},duration:function(e){var o=this,n=o._duration;console.log("**** HOWL DURATION");var t=o._soundById(e);return t&&(n=o._sprite[t._sprite][1]/1e3),n},state:function(){return console.log("**** HOWL STATE"),this._state},unload:function(){var e=this;console.log("**** HOWL UNLOAD");for(var o=e._sounds,n=0;n<o.length;n++){if(o[n]._paused||e.stop(o[n]._id),!e._webAudio){/MSIE |Trident\//.test(a._navigator&&a._navigator.userAgent)||(o[n]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),o[n]._node.removeEventListener("error",o[n]._errorFn,!1),o[n]._node.removeEventListener(a._canPlayEvent,o[n]._loadFn,!1)}delete o[n]._node,e._clearTimer(o[n]._id);var t=a._howls.indexOf(e);t>=0&&a._howls.splice(t,1)}var r=!0;for(n=0;n<a._howls.length;n++)if(a._howls[n]._src===e._src){r=!1;break}return s&&r&&delete s[e._src],a.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,o,n,t){var r=this,a=r["_on"+e];return console.log("**** HOWL ON"),"function"==typeof o&&a.push(t?{id:n,fn:o,once:t}:{id:n,fn:o}),r},off:function(e,o,n){var t=this,r=t["_on"+e],a=0;if(console.log("**** HOWL OFF"),"number"==typeof o&&(n=o,o=null),o||n)for(a=0;a<r.length;a++){var u=n===r[a].id;if(o===r[a].fn&&u||!o&&u){r.splice(a,1);break}}else if(e)t["_on"+e]=[];else{var i=Object.keys(t);for(a=0;a<i.length;a++)0===i[a].indexOf("_on")&&Array.isArray(t[i[a]])&&(t[i[a]]=[])}return t},once:function(e,o,n){var t=this;return console.log("**** HOWL ONCE"),t.on(e,o,n,1),t},_emit:function(e,o,n){var t=this,r=t["_on"+e];console.log("**** HOWL _EMIT");for(var a=r.length-1;a>=0;a--)r[a].id&&r[a].id!==o&&"load"!==e||(setTimeout(function(e){e.call(this,o,n)}.bind(t,r[a].fn),0),r[a].once&&t.off(e,r[a].fn,r[a].id));return t},_loadQueue:function(){var e=this;if(console.log("**** HOWL _LOADQUEUE"),e._queue.length>0){var o=e._queue[0];e.once(o.event,function(){e._queue.shift(),e._loadQueue()}),o.action()}return e},_ended:function(e){var o=this,n=e._sprite;if(console.log("**** HOWL _ENDED"),!o._webAudio&&o._node&&!o._node.ended)return setTimeout(o._ended.bind(o,e),100),o;var t=!(!e._loop&&!o._sprite[n][2]);if(o._emit("end",e._id),!o._webAudio&&t&&o.stop(e._id,!0).play(e._id),o._webAudio&&t){o._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=a.ctx.currentTime;var r=1e3*(e._stop-e._start)/Math.abs(e._rate);o._endTimers[e._id]=setTimeout(o._ended.bind(o,e),r)}return o._webAudio&&!t&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,o._clearTimer(e._id),o._cleanBuffer(e._node),a._autoSuspend()),o._webAudio||t||o.stop(e._id),o},_clearTimer:function(e){var o=this;return console.log("**** HOWL _CLEARTIMER"),o._endTimers[e]&&(clearTimeout(o._endTimers[e]),delete o._endTimers[e]),o},_soundById:function(e){var o=this;console.log("**** HOWL _SOUNDBYID");for(var n=0;n<o._sounds.length;n++)if(e===o._sounds[n]._id)return o._sounds[n];return null},_inactiveSound:function(){var e=this;console.log("**** HOWL _INACTIVESOUND"),e._drain();for(var o=0;o<e._sounds.length;o++)if(e._sounds[o]._ended)return e._sounds[o].reset();return new i(e)},_drain:function(){var e=this,o=e._pool,n=0,t=0;if(console.log("**** HOWL _DRAIN"),!(e._sounds.length<o)){for(t=0;t<e._sounds.length;t++)e._sounds[t]._ended&&n++;for(t=e._sounds.length-1;t>=0;t--){if(n<=o)return;e._sounds[t]._ended&&(e._webAudio&&e._sounds[t]._node&&e._sounds[t]._node.disconnect(0),e._sounds.splice(t,1),n--)}}},_getSoundIds:function(e){var o=this;if(console.log("**** HOWL _GETSOUNDIDS"),void 0===e){for(var n=[],t=0;t<o._sounds.length;t++)n.push(o._sounds[t]._id);return n}return[e]},_refreshBuffer:function(e){var o=this;return console.log("**** HOWL _REFRESHBUFFER"),e._node.bufferSource=a.ctx.createBufferSource(),e._node.bufferSource.buffer=s[o._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.value=e._rate,o},_cleanBuffer:function(e){var o=this;if(console.log("**** HOWL _CLEANBUFFER"),o._scratchBuffer){e.bufferSource.onended=null,e.bufferSource.disconnect(0);try{e.bufferSource.buffer=o._scratchBuffer}catch(e){}}return e.bufferSource=null,o}};var i=function(e){this._parent=e,this.init()};i.prototype={init:function(){var e=this,o=e._parent;return console.log("**** SOUND INIT"),e._muted=o._muted,e._loop=o._loop,e._volume=o._volume,e._rate=o._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++a._counter,o._sounds.push(e),e.create(),e},create:function(){var e=this,o=e._parent,n=a._muted||e._muted||e._parent._muted?0:e._volume;return console.log("**** SOUND CREATE"),o._webAudio?(e._node=void 0===a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),e._node.gain.setValueAtTime(n,a.ctx.currentTime),e._node.paused=!0,e._node.connect(a.masterGain)):(e._node=new Audio,e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(a._canPlayEvent,e._loadFn,!1),e._node.src=o._src,e._node.preload="auto",e._node.volume=n*a.volume(),e._node.load()),e},reset:function(){var e=this,o=e._parent;return console.log("**** SOUND RESET"),e._muted=o._muted,e._loop=o._loop,e._volume=o._volume,e._rate=o._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++a._counter,e},_errorListener:function(){var e=this;console.log("**** SOUND _ERRORLISTENER"),e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,o=e._parent;console.log("**** SOUND _LOADLISTENER"),o._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(o._sprite).length&&(o._sprite={__default:[0,1e3*o._duration]}),"loaded"!==o._state&&(o._state="loaded",o._emit("load"),o._loadQueue()),e._node.removeEventListener(a._canPlayEvent,e._loadFn,!1)}};var s={},d=function(e){var o=e._src;if(console.log("**** OTHER LOADBUFFER"),s[o])return e._duration=s[o].duration,void c(e);if(/^data:[^;]+;base64,/.test(o)){for(var n=atob(o.split(",")[1]),t=new Uint8Array(n.length),r=0;r<n.length;++r)t[r]=n.charCodeAt(r);_(t.buffer,e)}else{var a=new XMLHttpRequest;a.open("GET",o,!0),a.responseType="arraybuffer",a.onload=function(){var o=(a.status+"")[0];if("0"!==o&&"2"!==o&&"3"!==o)return void e._emit("loaderror",null,"Failed loading audio file with status: "+a.status+".");_(a.response,e)},a.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete s[o],e.load())},l(a)}},l=function(e){console.log("**** OTHER SAFEXHRSEND");try{e.send()}catch(o){e.onerror()}},_=function(e,o){console.log("**** OTHER DECODDEAUDIODATA"),a.ctx.decodeAudioData(e,function(e){e&&o._sounds.length>0&&(s[o._src]=e,c(o,e))},function(){o._emit("loaderror",null,"Decoding audio data failed.")})},c=function(e,o){console.log("**** OTHER LOADSOUND"),o&&!e._duration&&(e._duration=o.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},f=function(){console.log("**** OTHER INSTANTIATEAUDIOCONTEXT"),"undefined"!=typeof AudioContext?a.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?(a.ctx=new webkitAudioContext,a.needsIosContextUnlock=!0):a.usingWebAudio=!1},p=function(){console.log("**** OTHER SETUPAUDIOCONTEXT");try{f()}catch(e){a.usingWebAudio=!1}var t=e(a._navigator),r=o(a._navigator);if(t&&r&&r<9){var u=n(a._navigator);(a._navigator&&a._navigator.standalone&&!u||a._navigator&&!a._navigator.standalone&&!u)&&(a.usingWebAudio=!1)}a.usingWebAudio&&(a.masterGain=void 0===a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),a.masterGain.gain.value=a._muted?0:1,a.masterGain.connect(a.ctx.destination)),a._setup()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:a,Howl:u}}),"undefined"!=typeof exports&&(exports.Howler=a,exports.Howl=u),"undefined"!=typeof window?(window.HowlerGlobal=r,window.Howler=a,window.Howl=u,window.Sound=i):"undefined"!=typeof global&&(global.HowlerGlobal=r,global.Howler=a,global.Howl=u,global.Sound=i)}();
/*! Spatial Plugin */
!function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var o=e._howls.length-1;o>=0;o--)e._howls[o].stereo(n);return e},HowlerGlobal.prototype.pos=function(n,e,o){var t=this;return t.ctx&&t.ctx.listener?(e="number"!=typeof e?t._pos[1]:e,o="number"!=typeof o?t._pos[2]:o,"number"!=typeof n?t._pos:(t._pos=[n,e,o],t.ctx.listener.setPosition(t._pos[0],t._pos[1],t._pos[2]),t)):t},HowlerGlobal.prototype.orientation=function(n,e,o,t,r,i){var a=this;if(!a.ctx||!a.ctx.listener)return a;var p=a._orientation;return e="number"!=typeof e?p[1]:e,o="number"!=typeof o?p[2]:o,t="number"!=typeof t?p[3]:t,r="number"!=typeof r?p[4]:r,i="number"!=typeof i?p[5]:i,"number"!=typeof n?p:(a._orientation=[n,e,o,t,r,i],a.ctx.listener.setOrientation(n,e,o,t,r,i),a)},Howl.prototype.init=function(n){return function(e){var o=this;return o._orientation=e.orientation||[1,0,0],o._stereo=e.stereo||null,o._pos=e.pos||null,o._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},o._onstereo=e.onstereo?[{fn:e.onstereo}]:[],o._onpos=e.onpos?[{fn:e.onpos}]:[],o._onorientation=e.onorientation?[{fn:e.onorientation}]:[],n.call(this,e)}}(Howl.prototype.init),Howl.prototype.stereo=function(e,o){var t=this;if(!t._webAudio)return t;if("loaded"!==t._state)return t._queue.push({event:"stereo",action:function(){t.stereo(e,o)}}),t;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===o){if("number"!=typeof e)return t._stereo;t._stereo=e,t._pos=[e,0,0]}for(var i=t._getSoundIds(o),a=0;a<i.length;a++){var p=t._soundById(i[a]);if(p){if("number"!=typeof e)return p._stereo;p._stereo=e,p._pos=[e,0,0],p._node&&(p._pannerAttr.panningModel="equalpower",p._panner&&p._panner.pan||n(p,r),"spatial"===r?p._panner.setPosition(e,0,0):p._panner.pan.value=e),t._emit("stereo",p._id)}}return t},Howl.prototype.pos=function(e,o,t,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(e,o,t,r)}}),i;if(o="number"!=typeof o?0:o,t="number"!=typeof t?-.5:t,void 0===r){if("number"!=typeof e)return i._pos;i._pos=[e,o,t]}for(var a=i._getSoundIds(r),p=0;p<a.length;p++){var s=i._soundById(a[p]);if(s){if("number"!=typeof e)return s._pos;s._pos=[e,o,t],s._node&&(s._panner&&!s._panner.pan||n(s,"spatial"),s._panner.setPosition(e,o,t)),i._emit("pos",s._id)}}return i},Howl.prototype.orientation=function(e,o,t,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(e,o,t,r)}}),i;if(o="number"!=typeof o?i._orientation[1]:o,t="number"!=typeof t?i._orientation[2]:t,void 0===r){if("number"!=typeof e)return i._orientation;i._orientation=[e,o,t]}for(var a=i._getSoundIds(r),p=0;p<a.length;p++){var s=i._soundById(a[p]);if(s){if("number"!=typeof e)return s._orientation;s._orientation=[e,o,t],s._node&&(s._panner||(s._pos||(s._pos=i._pos||[0,0,-.5]),n(s,"spatial")),s._panner.setOrientation(e,o,t)),i._emit("orientation",s._id)}}return i},Howl.prototype.pannerAttr=function(){var e,o,t,r=this,i=arguments;if(!r._webAudio)return r;if(0===i.length)return r._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return t=r._soundById(parseInt(i[0],10)),t?t._pannerAttr:r._pannerAttr;e=i[0],void 0===o&&(r._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:r._coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:r._coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:r._distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:r._maxDistance,panningModel:void 0!==e.panningModel?e.panningModel:r._panningModel,refDistance:void 0!==e.refDistance?e.refDistance:r._refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:r._rolloffFactor})}else 2===i.length&&(e=i[0],o=parseInt(i[1],10));for(var a=r._getSoundIds(o),p=0;p<a.length;p++)if(t=r._soundById(a[p])){var s=t._pannerAttr;s={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:s.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:s.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:s.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:s.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:s.maxDistance,panningModel:void 0!==e.panningModel?e.panningModel:s.panningModel,refDistance:void 0!==e.refDistance?e.refDistance:s.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:s.rolloffFactor};var l=t._panner;l?(l.coneInnerAngle=s.coneInnerAngle,l.coneOuterAngle=s.coneOuterAngle,l.coneOuterGain=s.coneOuterGain,l.distanceModel=s.distanceModel,l.maxDistance=s.maxDistance,l.panningModel=s.panningModel,l.refDistance=s.refDistance,l.rolloffFactor=s.rolloffFactor):(t._pos||(t._pos=r._pos||[0,0,-.5]),n(t,"spatial"))}return r},Sound.prototype.init=function(n){return function(){var e=this,o=e._parent;e._orientation=o._orientation,e._stereo=o._stereo,e._pos=o._pos,e._pannerAttr=o._pannerAttr,n.call(this),e._stereo?o.stereo(e._stereo):e._pos&&o.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var e=this,o=e._parent;return e._orientation=o._orientation,e._pos=o._pos,e._pannerAttr=o._pannerAttr,n.call(this)}}(Sound.prototype.reset);var n=function(n,e){e=e||"spatial","spatial"===e?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.panningModel=n._pannerAttr.panningModel,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.value=n._stereo),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id)}}();