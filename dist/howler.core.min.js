/*! howler.js v2.0.5 | (c) 2013-2017, James Simpson of GoldFire Studios | MIT License | howlerjs.com */
!function(){"use strict";function e(e){var o=e&&e.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return o?parseInt(o[1],10):null}function o(e){return null!=r&&"function"==typeof r[e]}function n(){if(null===r||!o("canPlayType"))return{};var e=r.canPlayType("audio/mpeg;").replace(/^no$/,""),n=self._navigator&&self._navigator.userAgent.match(/OPR\/([0-6].)/g);return{mp3:!(n&&parseInt(n[0].split("/")[1],10)<33||!e&&!audioTest.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!e,opus:!!r.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!r.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!r.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!r.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(r.canPlayType("audio/x-m4a;")||r.canPlayType("audio/m4a;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(r.canPlayType("audio/x-mp4;")||r.canPlayType("audio/mp4;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!r.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(r.canPlayType("audio/x-flac;")||r.canPlayType("audio/flac;")).replace(/^no$/,"")}}function t(e){return u.supportedCodecs[e.replace(/^x-/,"")]}var r=null;!function(){if("undefined"!=typeof Audio)try{r=new Audio}catch(e){}}();var a=function(e,o,n){console.log("**** unlock generic");var t=e.createOscillator();t.frequency.value=440,t.connect(e.destination),t.onended=function(){t.disconnect(0),console.log("Oscillator - Done"),n()},console.log("Oscillator - Start"),t.start(0),t.stop(.1),"function"==typeof e.resume&&e.resume()},u=function(){var o="undefined"!=typeof window&&window.navigator?window.navigator:null,t="undefined"!=typeof AudioContext,a="undefined"!=typeof webkitAudioContext,u=t||a,i=!u&&null!==r,s=!t&&!i,d=/iP(hone|od|ad)/.test(o&&o.platform),l=/safari/.test(o&&o.userAgent.toLowerCase());return{navigator:o,hasW3CAudioContext:t,hasWebkitAudioContext:a,webAudioCapable:u,useHTML5AudioFallback:i,noAudio:s,isIOS:d,isSafari:l,needsIosContextUnlock:d&&l,iosVersion:d?e(o):null,supportedCodecs:n()}}(),i=function(){this.init()};i.prototype={_counter:1e3,_howls:[],_muted:!1,_volume:1,_canPlayEvent:u.useHTML5AudioFallback&&!function(e){return null!==r&&void 0!==r[e]}("oncanplaythrough")?"canplay":"canplaythrough",_navigator:u.navigator,_isIosSafari:u.needsIosContextUnlock,masterGain:null,noAudio:u.noAudio,usingWebAudio:u.webAudioCapable,autoSuspend:!0,ctx:null,mobileAutoEnable:!0,init:function(){var e=this||s;return console.log("**** HOWLER INIT"),console.log("************** Init ************** "),console.log(e),console.log("********************************** "),e.needsIosContextUnlock=u.needsIosContextUnlock,e._setup(),console.log("**** HOWLER INIT - DONE"),e},volume:function(e){var o=this||s;if(console.log("**** HOWLER VOLUME"),e=parseFloat(e),o.ctx||m(),void 0!==e&&e>=0&&e<=1){if(o._volume=e,o._muted)return console.log("**** HOWLER VOLUME - DONE (muted)"),o;o.usingWebAudio&&(o.masterGain.gain.value=e);for(var n=0;n<o._howls.length;n++)if(!o._howls[n]._webAudio)for(var t=o._howls[n]._getSoundIds(),r=0;r<t.length;r++){var a=o._howls[n]._soundById(t[r]);a&&a._node&&(a._node.volume=a._volume*e)}return console.log("**** HOWLER VOLUME - DONE"),o}return o._volume},mute:function(e){var o=this||s;console.log("**** HOWLER MUTE"),o.ctx||m(),o._muted=e,o.usingWebAudio&&(o.masterGain.gain.value=e?0:o._volume);for(var n=0;n<o._howls.length;n++)if(!o._howls[n]._webAudio)for(var t=o._howls[n]._getSoundIds(),r=0;r<t.length;r++){var a=o._howls[n]._soundById(t[r]);a&&a._node&&(a._node.muted=!!e||a._muted)}return console.log("**** HOWLER MUTE - DONE"),o},unload:function(){var e=this||s;console.log("**** HOWLER UNLOAD");for(var o=e._howls.length-1;o>=0;o--)e._howls[o].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,m()),console.log("**** HOWLER UNLOAD - DONE"),e},codecs:function(e){return t(e)},get needsIosContextUnlock(){var e=(this||s)._needsIosContextUnlock;return console.log("**** Unlock needed= "+e),e},set needsIosContextUnlock(e){var o=this||s;o._isIosSafari||(e=!1),o._needsIosContextUnlock=e,console.log("**** Setting unlock needed status="+o._needsIosContextUnlock)},_setup:function(){var e=this||s;console.log("**** HOWLER _SETUP"),e.state=e.ctx?e.ctx.state||"running":"running",e._autoSuspend(),console.log("**** HOWLER _SETUP - DONE")},_enableMobileAudio:function(){var e=this||s;console.log("**** HOWLER _ENABLEMOBILEAUDIO");var o=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(e._navigator&&e._navigator.userAgent),n=!!("ontouchend"in window||e._navigator&&e._navigator.maxTouchPoints>0||e._navigator&&e._navigator.msMaxTouchPoints>0);if(e._mobileEnabled||!e.ctx||!o&&!n)return void console.log("**** HOWLER _ENABLEMOBILEAUDIO - DONE (not touch device)");e._mobileEnabled=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,console.log("**** Unloading"),e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(){console.log("**** HOWLER UNLOCK"),s._autoResume(),a(e.ctx,e._scratchBuffer,function(){e._mobileEnabled=!0,e.mobileAutoEnable=!1,s.needsIosContextUnlock=!1,document.removeEventListener("touchend",t,!0)})};return document.addEventListener("touchend",t,!0),console.log("**** HOWLER _ENABLEMOBILEAUDIO - DONE"),e},_autoSuspend:function(){var e=this;if(console.log("**** HOWLER _AUTOSUSPEND"),!e.autoSuspend||!e.ctx||void 0===e.ctx.suspend||!s.usingWebAudio)return void console.log("**** HOWLER _AUTOSUSPEND - DONE (Cannot suspend) ");for(var o=0;o<e._howls.length;o++)if(e._howls[o]._webAudio)for(var n=0;n<e._howls[o]._sounds.length;n++)if(!e._howls[o]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),console.log("**** HOWLER _AUTOSUSPEND - DONE"),e},_autoResume:function(){var e=this;return console.log("**** HOWLER _AUTORESUME"),e.ctx&&void 0!==e.ctx.resume&&s.usingWebAudio?("running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then(function(){e.state="running";for(var o=0;o<e._howls.length;o++)e._howls[o]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),console.log("**** HOWLER _AUTORESUME - DONE"),e):void console.log("**** HOWLER _AUTORESUME - DONE (non-resumable)")}};var s=new i,d=function(e){var o=this;if(!e.src||0===e.src.length)return void console.error("An array of source files must be passed with any new Howl.");o.init(e)};d.prototype={init:function(e){var o=this;return console.log("**** HOWL INIT"),s.ctx||m(),o._autoplay=e.autoplay||!1,o._format="string"!=typeof e.format?e.format:[e.format],o._html5=e.html5||!1,o._muted=e.mute||!1,o._loop=e.loop||!1,o._pool=e.pool||5,o._preload="boolean"!=typeof e.preload||e.preload,o._rate=e.rate||1,o._sprite=e.sprite||{},o._src="string"!=typeof e.src?e.src:[e.src],o._volume=void 0!==e.volume?e.volume:1,o._duration=0,o._state="unloaded",o._sounds=[],o._endTimers={},o._queue=[],o._onend=e.onend?[{fn:e.onend}]:[],o._onfade=e.onfade?[{fn:e.onfade}]:[],o._onload=e.onload?[{fn:e.onload}]:[],o._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],o._onpause=e.onpause?[{fn:e.onpause}]:[],o._onplay=e.onplay?[{fn:e.onplay}]:[],o._onstop=e.onstop?[{fn:e.onstop}]:[],o._onmute=e.onmute?[{fn:e.onmute}]:[],o._onvolume=e.onvolume?[{fn:e.onvolume}]:[],o._onrate=e.onrate?[{fn:e.onrate}]:[],o._onseek=e.onseek?[{fn:e.onseek}]:[],o._onresume=[],o._webAudio=s.usingWebAudio&&!o._html5,void 0!==s.ctx&&s.ctx&&s.mobileAutoEnable&&s._enableMobileAudio(),s._howls.push(o),o._autoplay&&!s.needsIosContextUnlock&&o._queue.push({event:"play",action:function(){o.play()}}),o._preload&&o.load(),o},load:function(){var e=this,o=null;if(console.log("**** HOWL LOAD"),s.noAudio)return void e._emit("loaderror",null,"No audio support.");"string"==typeof e._src&&(e._src=[e._src]);for(var n=0;n<e._src.length;n++){var t,r;if(e._format&&e._format[n])t=e._format[n];else{if("string"!=typeof(r=e._src[n])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}t=/^data:audio\/([^;,]+);/i.exec(r),t||(t=/\.([^.]+)$/.exec(r.split("?",1)[0])),t&&(t=t[1].toLowerCase())}if(t||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),t&&s.codecs(t)){o=e._src[n];break}}return o?(e._src=o,e._state="loading","https:"===window.location.protocol&&"http:"===o.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new l(e),e._webAudio&&c(e),e):void e._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(e,o){var n=this,t=null;if(console.log("**** HOWL PLAY"),console.log("**** Needs unlock status= "+s.needsIosContextUnlock),"number"==typeof e)t=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return console.log("**** passed sprite does not exist"),null;if(void 0===e){e="__default";for(var r=0,a=0;a<n._sounds.length;a++)n._sounds[a]._paused&&!n._sounds[a]._ended&&(r++,t=n._sounds[a]._id);1===r?e=null:t=null}}var u=t?n._soundById(t):n._inactiveSound();if(!u)return console.log("**** No sound"),null;if(t&&!e&&(e=u._sprite||"__default"),"loaded"!==n._state){console.log("**** Not loaded, waiting"),u._sprite=e,u._ended=!1;var i=u._id;return n._queue.push({event:"play",action:function(){n.play(i)}}),i}if(t&&!u._paused)return o||(console.log("**** triggering internal event to process queue"),setTimeout(function(){n._emit("play",u._id)},0)),u._id;if(s.needsIosContextUnlock)return console.log("**** Needs context unlocking - TODO"),u._id;n._webAudio&&s._autoResume();var d=Math.max(0,u._seek>0?u._seek:n._sprite[e][0]/1e3),l=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-d),_=1e3*l/Math.abs(u._rate);u._paused=!1,u._ended=!1,u._sprite=e,u._seek=d,u._start=n._sprite[e][0]/1e3,u._stop=(n._sprite[e][0]+n._sprite[e][1])/1e3,u._loop=!(!u._loop&&!n._sprite[e][2]);var c=u._node;if(n._webAudio){var f=function(){console.log("**** Play WebAudio"),n._refreshBuffer(u);var e=u._muted||n._muted?0:u._volume;c.gain.setValueAtTime(e,s.ctx.currentTime),u._playStart=s.ctx.currentTime,void 0===c.bufferSource.start?u._loop?c.bufferSource.noteGrainOn(0,d,86400):c.bufferSource.noteGrainOn(0,d,l):u._loop?c.bufferSource.start(0,d,86400):c.bufferSource.start(0,d,l),_!==1/0&&(n._endTimers[u._id]=setTimeout(n._ended.bind(n,u),_)),o||setTimeout(function(){n._emit("play",u._id)},0)},p="running"===s.state;if("loaded"===n._state&&p)f();else{var v=p||"loaded"!==n._state?"load":"resume";n.once(v,f,p?u._id:null),n._clearTimer(u._id)}}else{var m=function(){console.log("**** Play HTML 5"),c.currentTime=d,c.muted=u._muted||n._muted||s._muted||c.muted,c.volume=u._volume*s.volume(),c.playbackRate=u._rate,c.play(),_!==1/0&&(n._endTimers[u._id]=setTimeout(n._ended.bind(n,u),_)),o||n._emit("play",u._id)},g="loaded"===n._state&&(window&&window.ejecta||!c.readyState&&s._navigator.isCocoonJS);if(4===c.readyState||g)m();else{var h=function(){m(),c.removeEventListener(s._canPlayEvent,h,!1)};c.addEventListener(s._canPlayEvent,h,!1),n._clearTimer(u._id)}}return u._id},pause:function(e){var o=this;if(console.log("**** HOWL PAUSE"),"loaded"!==o._state)return o._queue.push({event:"pause",action:function(){o.pause(e)}}),o;for(var n=o._getSoundIds(e),t=0;t<n.length;t++){o._clearTimer(n[t]);var r=o._soundById(n[t]);if(r&&!r._paused&&(r._seek=o.seek(n[t]),r._rateSeek=0,r._paused=!0,o._stopFade(n[t]),r._node))if(o._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),o._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||o._emit("pause",r?r._id:null)}return o},stop:function(e,o){var n=this;if(console.log("**** HOWL STOP"),"loaded"!==n._state)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var t=n._getSoundIds(e),r=0;r<t.length;r++){n._clearTimer(t[r]);var a=n._soundById(t[r]);a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,n._stopFade(t[r]),a._node&&(n._webAudio?a._node.bufferSource&&(void 0===a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),n._cleanBuffer(a._node)):isNaN(a._node.duration)&&a._node.duration!==1/0||(a._node.currentTime=a._start||0,a._node.pause())),o||n._emit("stop",a._id))}return n},mute:function(e,o){var n=this;if(console.log("**** HOWL MUTE"),"loaded"!==n._state)return n._queue.push({event:"mute",action:function(){n.mute(e,o)}}),n;if(void 0===o){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var t=n._getSoundIds(o),r=0;r<t.length;r++){var a=n._soundById(t[r]);a&&(a._muted=e,n._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,s.ctx.currentTime):a._node&&(a._node.muted=!!s._muted||e),n._emit("mute",a._id))}return n},volume:function(){var e,o,n=this,t=arguments;if(console.log("**** HOWL VOLUME"),0===t.length)return n._volume;if(1===t.length||2===t.length&&void 0===t[1]){n._getSoundIds().indexOf(t[0])>=0?o=parseInt(t[0],10):e=parseFloat(t[0])}else t.length>=2&&(e=parseFloat(t[0]),o=parseInt(t[1],10));var r;if(!(void 0!==e&&e>=0&&e<=1))return r=o?n._soundById(o):n._sounds[0],r?r._volume:0;if("loaded"!==n._state)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,t)}}),n;void 0===o&&(n._volume=e),o=n._getSoundIds(o);for(var a=0;a<o.length;a++)(r=n._soundById(o[a]))&&(r._volume=e,t[2]||n._stopFade(o[a]),n._webAudio&&r._node&&!r._muted?r._node.gain.setValueAtTime(e,s.ctx.currentTime):r._node&&!r._muted&&(r._node.volume=e*s.volume()),n._emit("volume",r._id));return n},fade:function(e,o,n,t){var r=this,a=Math.abs(e-o),u=e>o?"out":"in",i=a/.01,d=i>0?n/i:n;if(console.log("**** HOWL FADE"),d<4&&(i=Math.ceil(i/(4/d)),d=4),"loaded"!==r._state)return r._queue.push({event:"fade",action:function(){r.fade(e,o,n,t)}}),r;r.volume(e,t);for(var l=r._getSoundIds(t),_=0;_<l.length;_++){var c=r._soundById(l[_]);if(c){if(t||r._stopFade(l[_]),r._webAudio&&!c._muted){var f=s.ctx.currentTime,p=f+n/1e3;c._volume=e,c._node.gain.setValueAtTime(e,f),c._node.gain.linearRampToValueAtTime(o,p)}var v=e;c._interval=setInterval(function(n,a){i>0&&(v+="in"===u?.01:-.01),v=Math.max(0,v),v=Math.min(1,v),v=Math.round(100*v)/100,r._webAudio?(void 0===t&&(r._volume=v),a._volume=v):r.volume(v,n,!0),(o<e&&v<=o||o>e&&v>=o)&&(clearInterval(a._interval),a._interval=null,r.volume(o,n),r._emit("fade",n))}.bind(r,l[_],c),d)}}return r},_stopFade:function(e){var o=this,n=o._soundById(e);return console.log("**** HOWL _STOPFADE"),n&&n._interval&&(o._webAudio&&n._node.gain.cancelScheduledValues(s.ctx.currentTime),clearInterval(n._interval),n._interval=null,o._emit("fade",e)),o},loop:function(){var e,o,n,t=this,r=arguments;if(console.log("**** HOWL LOOP"),0===r.length)return t._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(n=t._soundById(parseInt(r[0],10)))&&n._loop;e=r[0],t._loop=e}else 2===r.length&&(e=r[0],o=parseInt(r[1],10));for(var a=t._getSoundIds(o),u=0;u<a.length;u++)(n=t._soundById(a[u]))&&(n._loop=e,t._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return t},rate:function(){var e,o,n=this,t=arguments;if(console.log("**** HOWL RATE"),0===t.length)o=n._sounds[0]._id;else if(1===t.length){var r=n._getSoundIds(),a=r.indexOf(t[0]);a>=0?o=parseInt(t[0],10):e=parseFloat(t[0])}else 2===t.length&&(e=parseFloat(t[0]),o=parseInt(t[1],10));var u;if("number"!=typeof e)return u=n._soundById(o),u?u._rate:n._rate;if("loaded"!==n._state)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,t)}}),n;void 0===o&&(n._rate=e),o=n._getSoundIds(o);for(var i=0;i<o.length;i++)if(u=n._soundById(o[i])){u._rateSeek=n.seek(o[i]),u._playStart=n._webAudio?s.ctx.currentTime:u._playStart,u._rate=e,n._webAudio&&u._node&&u._node.bufferSource?u._node.bufferSource.playbackRate.value=e:u._node&&(u._node.playbackRate=e);var d=n.seek(o[i]),l=(n._sprite[u._sprite][0]+n._sprite[u._sprite][1])/1e3-d,_=1e3*l/Math.abs(u._rate);!n._endTimers[o[i]]&&u._paused||(n._clearTimer(o[i]),n._endTimers[o[i]]=setTimeout(n._ended.bind(n,u),_)),n._emit("rate",u._id)}return n},seek:function(){var e,o,n=this,t=arguments;if(console.log("**** HOWL SEEK"),0===t.length)o=n._sounds[0]._id;else if(1===t.length){var r=n._getSoundIds(),a=r.indexOf(t[0]);a>=0?o=parseInt(t[0],10):(o=n._sounds[0]._id,e=parseFloat(t[0]))}else 2===t.length&&(e=parseFloat(t[0]),o=parseInt(t[1],10));if(void 0===o)return n;if("loaded"!==n._state)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,t)}}),n;var u=n._soundById(o);if(u){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var i=n.playing(o)?s.ctx.currentTime-u._playStart:0,d=u._rateSeek?u._rateSeek-u._seek:0;return u._seek+(d+i*Math.abs(u._rate))}return u._node.currentTime}var l=n.playing(o);l&&n.pause(o,!0),u._seek=e,u._ended=!1,n._clearTimer(o),l&&n.play(o,!0),!n._webAudio&&u._node&&(u._node.currentTime=e),n._emit("seek",o)}return n},playing:function(e){var o=this;if(console.log("**** HOWL PLAYING"),"number"==typeof e){var n=o._soundById(e);return!!n&&!n._paused}for(var t=0;t<o._sounds.length;t++)if(!o._sounds[t]._paused)return!0;return!1},duration:function(e){var o=this,n=o._duration;console.log("**** HOWL DURATION");var t=o._soundById(e);return t&&(n=o._sprite[t._sprite][1]/1e3),n},state:function(){return console.log("**** HOWL STATE"),this._state},unload:function(){var e=this;console.log("**** HOWL UNLOAD");for(var o=e._sounds,n=0;n<o.length;n++){if(o[n]._paused||e.stop(o[n]._id),!e._webAudio){/MSIE |Trident\//.test(s._navigator&&s._navigator.userAgent)||(o[n]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),o[n]._node.removeEventListener("error",o[n]._errorFn,!1),o[n]._node.removeEventListener(s._canPlayEvent,o[n]._loadFn,!1)}delete o[n]._node,e._clearTimer(o[n]._id);var t=s._howls.indexOf(e);t>=0&&s._howls.splice(t,1)}var r=!0;for(n=0;n<s._howls.length;n++)if(s._howls[n]._src===e._src){r=!1;break}return _&&r&&delete _[e._src],s.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,o,n,t){var r=this,a=r["_on"+e];return console.log("**** HOWL ON"),"function"==typeof o&&a.push(t?{id:n,fn:o,once:t}:{id:n,fn:o}),r},off:function(e,o,n){var t=this,r=t["_on"+e],a=0;if(console.log("**** HOWL OFF"),"number"==typeof o&&(n=o,o=null),o||n)for(a=0;a<r.length;a++){var u=n===r[a].id;if(o===r[a].fn&&u||!o&&u){r.splice(a,1);break}}else if(e)t["_on"+e]=[];else{var i=Object.keys(t);for(a=0;a<i.length;a++)0===i[a].indexOf("_on")&&Array.isArray(t[i[a]])&&(t[i[a]]=[])}return t},once:function(e,o,n){var t=this;return console.log("**** HOWL ONCE"),t.on(e,o,n,1),t},_emit:function(e,o,n){var t=this,r=t["_on"+e];console.log("**** HOWL _EMIT");for(var a=r.length-1;a>=0;a--)r[a].id&&r[a].id!==o&&"load"!==e||(setTimeout(function(e){e.call(this,o,n)}.bind(t,r[a].fn),0),r[a].once&&t.off(e,r[a].fn,r[a].id));return t},_loadQueue:function(){var e=this;if(console.log("**** HOWL _LOADQUEUE"),e._queue.length>0){var o=e._queue[0];e.once(o.event,function(){e._queue.shift(),e._loadQueue()}),o.action()}return e},_ended:function(e){var o=this,n=e._sprite;if(console.log("**** HOWL _ENDED"),!o._webAudio&&o._node&&!o._node.ended)return setTimeout(o._ended.bind(o,e),100),o;var t=!(!e._loop&&!o._sprite[n][2]);if(o._emit("end",e._id),!o._webAudio&&t&&o.stop(e._id,!0).play(e._id),o._webAudio&&t){o._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=s.ctx.currentTime;var r=1e3*(e._stop-e._start)/Math.abs(e._rate);o._endTimers[e._id]=setTimeout(o._ended.bind(o,e),r)}return o._webAudio&&!t&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,o._clearTimer(e._id),o._cleanBuffer(e._node),s._autoSuspend()),o._webAudio||t||o.stop(e._id),o},_clearTimer:function(e){var o=this;return console.log("**** HOWL _CLEARTIMER"),o._endTimers[e]&&(clearTimeout(o._endTimers[e]),delete o._endTimers[e]),o},_soundById:function(e){var o=this;console.log("**** HOWL _SOUNDBYID");for(var n=0;n<o._sounds.length;n++)if(e===o._sounds[n]._id)return o._sounds[n];return null},_inactiveSound:function(){var e=this;console.log("**** HOWL _INACTIVESOUND"),e._drain();for(var o=0;o<e._sounds.length;o++)if(e._sounds[o]._ended)return e._sounds[o].reset();return new l(e)},_drain:function(){var e=this,o=e._pool,n=0,t=0;if(console.log("**** HOWL _DRAIN"),!(e._sounds.length<o)){for(t=0;t<e._sounds.length;t++)e._sounds[t]._ended&&n++;for(t=e._sounds.length-1;t>=0;t--){if(n<=o)return;e._sounds[t]._ended&&(e._webAudio&&e._sounds[t]._node&&e._sounds[t]._node.disconnect(0),e._sounds.splice(t,1),n--)}}},_getSoundIds:function(e){var o=this;if(console.log("**** HOWL _GETSOUNDIDS"),void 0===e){for(var n=[],t=0;t<o._sounds.length;t++)n.push(o._sounds[t]._id);return n}return[e]},_refreshBuffer:function(e){var o=this;return console.log("**** HOWL _REFRESHBUFFER"),e._node.bufferSource=s.ctx.createBufferSource(),e._node.bufferSource.buffer=_[o._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.value=e._rate,o},_cleanBuffer:function(e){var o=this;if(console.log("**** HOWL _CLEANBUFFER"),o._scratchBuffer){e.bufferSource.onended=null,e.bufferSource.disconnect(0);try{e.bufferSource.buffer=o._scratchBuffer}catch(e){}}return e.bufferSource=null,o}};var l=function(e){this._parent=e,this.init()};l.prototype={init:function(){var e=this,o=e._parent;return console.log("**** SOUND INIT"),e._muted=o._muted,e._loop=o._loop,e._volume=o._volume,e._rate=o._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++s._counter,o._sounds.push(e),e.create(),e},create:function(){var e=this,o=e._parent,n=s._muted||e._muted||e._parent._muted?0:e._volume;return console.log("**** SOUND CREATE"),o._webAudio?(e._node=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),e._node.gain.setValueAtTime(n,s.ctx.currentTime),e._node.paused=!0,e._node.connect(s.masterGain)):(e._node=new Audio,e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(s._canPlayEvent,e._loadFn,!1),e._node.src=o._src,e._node.preload="auto",e._node.volume=n*s.volume(),e._node.load()),e},reset:function(){var e=this,o=e._parent;return console.log("**** SOUND RESET"),e._muted=o._muted,e._loop=o._loop,e._volume=o._volume,e._rate=o._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++s._counter,e},_errorListener:function(){var e=this;console.log("**** SOUND _ERRORLISTENER"),e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,o=e._parent;console.log("**** SOUND _LOADLISTENER"),o._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(o._sprite).length&&(o._sprite={__default:[0,1e3*o._duration]}),"loaded"!==o._state&&(o._state="loaded",o._emit("load"),o._loadQueue()),e._node.removeEventListener(s._canPlayEvent,e._loadFn,!1)}};var _={},c=function(e){var o=e._src;if(console.log("**** OTHER LOADBUFFER"),_[o])return e._duration=_[o].duration,void v(e);if(/^data:[^;]+;base64,/.test(o)){for(var n=atob(o.split(",")[1]),t=new Uint8Array(n.length),r=0;r<n.length;++r)t[r]=n.charCodeAt(r);p(t.buffer,e)}else{var a=new XMLHttpRequest;a.open("GET",o,!0),a.responseType="arraybuffer",a.onload=function(){var o=(a.status+"")[0];if("0"!==o&&"2"!==o&&"3"!==o)return void e._emit("loaderror",null,"Failed loading audio file with status: "+a.status+".");p(a.response,e)},a.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete _[o],e.load())},f(a)}},f=function(e){console.log("**** OTHER SAFEXHRSEND");try{e.send()}catch(o){e.onerror()}},p=function(e,o){console.log("**** OTHER DECODDEAUDIODATA"),s.ctx.decodeAudioData(e,function(e){e&&o._sounds.length>0&&(_[o._src]=e,v(o,e))},function(){o._emit("loaderror",null,"Decoding audio data failed.")})},v=function(e,o){console.log("**** OTHER LOADSOUND"),o&&!e._duration&&(e._duration=o.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},m=function(){console.log("**** OTHER SETUPAUDIOCONTEXT");try{if(!s.usingWebAudio)return;u.hasW3CAudioContext?s.ctx=new AudioContext:u.hasWebkitAudioContext()&&(s.ctx=new webkitAudioContext,s.needsIosContextUnlock=!0)}catch(e){s.usingWebAudio=!1}var o=e(s._navigator);if(u.isIOS&&o&&o<9){var n=isSafari(s._navigator);(s._navigator&&s._navigator.standalone&&!n||s._navigator&&!s._navigator.standalone&&!n)&&(s.usingWebAudio=!1)}s.usingWebAudio&&(s.masterGain=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),s.masterGain.gain.value=s._muted?0:1,s.masterGain.connect(s.ctx.destination)),s._setup()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:s,Howl:d}}),"undefined"!=typeof exports&&(exports.Howler=s,exports.Howl=d),"undefined"!=typeof window?(window.HowlerGlobal=i,window.Howler=s,window.Howl=d,window.Sound=l):"undefined"!=typeof global&&(global.HowlerGlobal=i,global.Howler=s,global.Howl=d,global.Sound=l)}();